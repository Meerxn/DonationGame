<!DOCTYPE html>
<html lang="en">
    
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Donation Game</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<br>
<div class="container">
    <div class="row">
        <div class="card">
            <div class="card-body">
            <h5 class="card-title">Donation Game: Snake</h5>
            <p class="card-text">This is a basic snake game. The scores that you will get will be used as a metric by me to donate money to organizations. Although there is no max limit to the score 
                there is a max limit donation (Total 300) from one person. After you have finisihed your game there will be a pop window. Please screeenshot it and send it to the socials provided below.</p>
            <blockquote class="blockquote mb-0">
                
                <footer class="blockquote-footer">By Fardeen Meeran & Krishang Patney</footer>
              </blockquote>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-auto">
            <div class="card" style="width: 600px;">
                <div class="card-body">
                    <canvas id="canvasGrid" width="550" height="550"></canvas>
                    <h5 class="card-title">Snake</h5>
                    <p class="card-text"> <p align = "center">Score: <a id = "score" > 0 </a> </p> </p>
                    <div class="row justify-content-md-center">
                        <div class="col-md-auto"><a href="https://www.instagram.com/meerxn_/" target="_blank"  class="btn btn-primary">Instagram</a></div>
                        <div class="col-md-auto"><a href="https://twitter.com/Meerxn" target="_blank"class="btn btn-primary">Twitter</a></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-auto">
            <div class="card" style="width: 400px;">
                <div class="card-body">
                     <img src="arrow keys.gif" width="350" alt="Arrows">
                </div>
            </div>
            <div class="card" style="width: 400px;">
                <div class="card-body">
                    Total Donation : 300 AED
                    <br>
                    Your Current Donation : <a id='donation'> 0 </a>
                </div>
            </div>
        </div>
    </div>
     

</div>
</html>


<script>
 

    window.onload=function() {

canv=document.getElementById("canvasGrid");

ctx=canv.getContext("2d");

document.addEventListener("keydown",keyPush);

setInterval(game,1000/15);

}
var clicks = 0; 
var apple = new Image();
apple.src = "apple.jpeg";

posX=25;
posY=25;

canvasGrid = 25;
canvaSize=25;

applePosX=15;
applePosY=15;

velocityX=0;
velocityY=0;

trail=[];

tail = 5;

function game() {

posX+=velocityX;

posY+=velocityY;

if(posX<0) {

    posX= canvaSize-1;

}

if(posX>canvaSize-1) {

    posX= 0;

}

if(posY<0) {

    posY= canvaSize-1;

}

if(posY>canvaSize-1) {

    posY= 0;

}

ctx.fillStyle="black";

ctx.fillRect(0,0,canv.width,canv.height);



ctx.fillStyle="yellow";

for(var i=0;i<trail.length;i++) {

    ctx.fillRect(trail[i].x*canvasGrid,trail[i].y*canvasGrid,canvasGrid-2,canvasGrid-2);
   
    if(trail[i].x==posX && trail[i].y==posY && clicks > 0){
       
        gameOver();
      

    }


}
trail.push({x:posX,y:posY});


while(trail.length>tail) {
    
    

trail.shift();

}



if(applePosX==posX && applePosY==posY) {

    tail++;

    applePosX=Math.floor(Math.random()*canvaSize);

    applePosY=Math.floor(Math.random()*canvaSize);
  this.scoreUpdate();

}

ctx.fillStyle="red";

ctx.drawImage(apple,applePosX*canvasGrid
,applePosY*canvasGrid
,canvasGrid
-2,canvasGrid
-2);

}
function scoreUpdate(){
this.clicks = this.clicks + 1;
document.getElementById("score").innerHTML = clicks;
donation = clicks/4
document.getElementById("donation").innerHTML = donation;
}
function gameOver(){
    document.getElementById("score").innerHTML = 0;
    document.getElementById("donation").innerHTML = 0;
 alert("Your score was: " +  clicks +  " Send the screenshot of this page before clicking OK to the socials below. ");
this.clicks = 0 ;
posX=posY=10;

canvasGrid=canvaSize=20;

applePosX=applePosY=15;

velocityX=velocityY=0;

snakeRoute=[];

}

function keyPush(evt) {

switch(evt.keyCode) {

 case 37:
     evt.preventDefault()
        velocityX=-1;velocityY=0;

        break;

    case 38:
    evt.preventDefault()
        velocityX=0;velocityY=-1;

        break;

    case 39:
    evt.preventDefault()
        velocityX=1;velocityY=0;

        break;

    case 40:
    evt.preventDefault()
        velocityX=0;velocityY=1;

        break;

}
function donateCalculator(score){
 donation = score/4
}


}






</script>
